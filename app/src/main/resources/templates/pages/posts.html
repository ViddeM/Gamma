<style>
    .table {
        display: table;

        width: 100%;
        max-width: 1280px;

        margin-left: auto;
        margin-right: auto;
    }

    .table-row {
        display: table-row;
        height: 50px;
    }

    .table-cell {
        display: table-cell;
    }

    .htmx-swapping {
        opacity: 0;
        transition: opacity 1s ease-out;
    }
</style>

<header th:replace="~{common/header}"></header>
<main>
     <a href="/" >Back</a>
    <div class="table">
        <div class="table-row">
            <div class="table-cell">Swedish name</div>
            <div class="table-cell">English name</div>
            <div class="table-cell">Email prefix</div>
        </div>
        <th:block th:each="post : ${posts}">
            <div class="table-row" th:fragment="post-row">
                <div class="table-cell" th:text="${post.svName()}"></div>
                <div class="table-cell" th:text="${post.enName()}"></div>
                <div class="table-cell" th:text="${post.emailPrefix()}"></div>
                <div class="table-cell">
                    <button th:data-hx-get="@{/posts/{postId}/edit(postId=${post.id()})}" data-hx-target="closest .table-row" data-hx-swap="outerHTML">Edit</button>
                    <form th:data-hx-post="@{/posts/{postId}(postId=${post.id()})}" data-hx-target="closest .table-row" data-hx-swap="outerHTML swap:1s">
                        <div th:replace="~{common/form-csrf}"></div>
                        <input type="hidden" name="_method" value="delete" />
                        <button type="submit">Delete</button>
                    </form>
                </div>
            </div>
        </th:block>
        <form th:if="${isAdmin}" th:fragment="create-post" class="table-row" th:data-hx-post="@{/posts}" data-hx-target="this" data-hx-swap="outerHTML">
            <div th:replace="~{common/form-csrf}"></div>
            <div class="table-cell">
                <div th:replace="~{common/input :: textInput(name='svName', value=${null}, errorMessage=${null}, label='Swedish name')}"></div>
            </div>
            <div class="table-cell">
                <div class="table-cell" th:replace="~{common/input :: textInput(name='enName', value=${null}, errorMessage=${null}, label='English name')}"></div>
            </div>
            <div class="table-cell">
                <div class="table-cell" th:replace="~{common/input :: textInput(name='emailPrefix', value=${null}, errorMessage=${null}, label='Email prefix')}"></div>
            </div>
            <div class="table-cell">
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</main>