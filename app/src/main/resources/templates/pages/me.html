<style>
    main {
        display: flex;
        flex-direction: column;
        gap: 1rem;

        margin-left: auto;
        margin-right: auto;
        width: fit-content;
    }

    img {
        height: 150px;
        object-fit: contain;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

</style>
<header th:replace="~{common/header}"></header>
<main>
    <a href="/" >Back</a>
    <th:block  th:with="meId = ${me.id()}">
        <div th:fragment="me-avatar">
            <img th:src="@{|/images/user/avatar/${meId}?r=${random}|}" alt="Me avatar" />
            <form th:data-hx-post="@{/me/avatar}"
                  enctype="multipart/form-data"
                  data-hx-target="closest div"
                  data-hx-swap="outerHTML">
                <div th:replace="~{common/form-csrf}"></div>
                <input type="hidden" name="_method" value="put" />
                <input type='file' name='file'>
                <button>Upload avatar</button>
            </form>
        </div>
    </th:block>
    <div th:fragment="userinfo" class="userinfo">
        <ul>
            <li th:text="${me.firstName()}"></li>
            <li th:text="${me.lastName()}"></li>
            <li th:text="${me.nick()}"></li>
            <li th:text="${me.email()}"></li>
            <li th:text="${me.acceptanceYear()}"></li>
            <li th:text="${me.cid()}"></li>
            <li th:text="${me.language()}"></li>
            <li th:text="|isAdmin? ${me.isAdmin()}|"></li>
        </ul>
        <button th:data-hx-get="@{/me/edit}" data-hx-target="closest .userinfo" data-hx-swap="innerHTML">Edit</button>
        <button th:data-hx-get="@{/me/edit-password}" data-hx-target="closest .userinfo" data-hx-swap="innerHTML">Change password</button>
    </div>
    <h2>
        My groups
    </h2>
    <ul>
        <li th:each="group : ${me.groups()}" th:text="|${group.group().prettyName()} - ${group.post().enName()}|"></li>
    </ul>
</main>
